<!DOCTYPE html>
<html class="writer-html5" lang="es" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>analyze module &mdash; documentación de documentation_API - 07/2024</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=47d6d466"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=efdbd0b9"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="user module" href="user.html" />
    <link rel="prev" title="HTTP" href="modules.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            documentation_API
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Buscar documentos" aria-label="Buscar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">HTTP</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">analyze module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#analyze.analizar_imagen"><code class="docutils literal notranslate"><span class="pre">analizar_imagen()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.analizar_url"><code class="docutils literal notranslate"><span class="pre">analizar_url()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.analyze_df"><code class="docutils literal notranslate"><span class="pre">analyze_df()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.analyze_image"><code class="docutils literal notranslate"><span class="pre">analyze_image()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.hello"><code class="docutils literal notranslate"><span class="pre">hello()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.preprocess_image"><code class="docutils literal notranslate"><span class="pre">preprocess_image()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.to_dataframe"><code class="docutils literal notranslate"><span class="pre">to_dataframe()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.to_path"><code class="docutils literal notranslate"><span class="pre">to_path()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.to_path64"><code class="docutils literal notranslate"><span class="pre">to_path64()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze.to_pathWEB"><code class="docutils literal notranslate"><span class="pre">to_pathWEB()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user.html">user module</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">analyze module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#analyze.analizar_imagen"><code class="docutils literal notranslate"><span class="pre">analizar_imagen()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.analizar_url"><code class="docutils literal notranslate"><span class="pre">analizar_url()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.analyze_df"><code class="docutils literal notranslate"><span class="pre">analyze_df()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.analyze_image"><code class="docutils literal notranslate"><span class="pre">analyze_image()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.hello"><code class="docutils literal notranslate"><span class="pre">hello()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.preprocess_image"><code class="docutils literal notranslate"><span class="pre">preprocess_image()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.to_dataframe"><code class="docutils literal notranslate"><span class="pre">to_dataframe()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.to_path"><code class="docutils literal notranslate"><span class="pre">to_path()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.to_path64"><code class="docutils literal notranslate"><span class="pre">to_path64()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#analyze.to_pathWEB"><code class="docutils literal notranslate"><span class="pre">to_pathWEB()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user.html">user module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">documentation_API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">HTTP</a></li>
      <li class="breadcrumb-item active">analyze module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/analyze.rst.txt" rel="nofollow"> Ver código fuente de la página</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-analyze">
<span id="analyze-module"></span><h1>analyze module<a class="headerlink" href="#module-analyze" title="Link to this heading"></a></h1>
<p>Este módulo proporciona un servidor Flask para analizar imágenes mediante modelos de aprendizaje automático.</p>
<dl class="py function">
<dt class="sig sig-object py" id="analyze.analizar_imagen">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">analizar_imagen</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#analyze.analizar_imagen" title="Link to this definition"></a></dt>
<dd><p>Analiza una imagen proporcionada a través de un archivo codificado en base64.</p>
<dl class="simple">
<dt>Request:</dt><dd><p>json: JSON que contiene el nombre del archivo de imagen guardado en el servidor para analizarla, asi como su ruta.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Devuelve<span class="colon">:</span></dt>
<dd class="field-odd"><p>JSON con los resultados del análisis o un mensaje de error.</p>
</dd>
<dt class="field-even">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-even"><p>Response</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.analizar_url">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">analizar_url</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#analyze.analizar_url" title="Link to this definition"></a></dt>
<dd><p>Analiza una imagen proporcionada a través de una URL.</p>
<dl class="simple">
<dt>Request:</dt><dd><p>json: JSON que contiene la URL de la imagen a analizar.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Devuelve<span class="colon">:</span></dt>
<dd class="field-odd"><p>JSON con los resultados del análisis o un mensaje de error.</p>
</dd>
<dt class="field-even">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-even"><p>Response</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.analyze_df">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">analyze_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.analyze_df" title="Link to this definition"></a></dt>
<dd><p>Analiza un DataFrame que contiene la ruta a una imágen y devuelve las predicciones del modelo.</p>
<p>Esta función utiliza dos modelos preentrenados para hacer predicciones sobre las imágenes
proporcionadas en el DataFrame. Las predicciones incluyen tanto la probabilidad de malignidad de
la lesión como la clasificación de la misma.</p>
<dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – DataFrame con las rutas a las imágenes y otros metadatos.
- “path_jpeg”: Columna con las rutas a las imágenes.
- “class”: Columna con las etiquetas objetivo (aunque no se utiliza en la predicción tensorflow necesita la columna).
- “target”: Columna con la clase objetivo (maligno/benigno) (aunque no se utiliza en la predicción tensorflow necesita la columna).</p>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>Lista de predicciones redondeadas.</p>
</dd>
<dt class="field-odd">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>“predictions”</p></li>
</ul>
</p>
</dd>
</dl>
<p class="rubric">Ejemplo</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;path_jpeg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;/path/to/image1.jpg&#39;</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;class&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unknown&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;unknown&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">analyze_df</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="go">{&#39;predictions&#39;: [23.45, 12.34, 56.78, ...]}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.analyze_image">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">analyze_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.analyze_image" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.hello">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">hello</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#analyze.hello" title="Link to this definition"></a></dt>
<dd><p>Ruta de prueba para verificar que el servidor está en funcionamiento.</p>
<dl class="field-list simple">
<dt class="field-odd">Devuelve<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mensaje de bienvenida.</p>
</dd>
<dt class="field-even">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.preprocess_image">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">preprocess_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.preprocess_image" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.to_dataframe">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">to_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.to_dataframe" title="Link to this definition"></a></dt>
<dd><p>Transforma una ruta de imagen en un DataFrame de Pandas con dimensiones 1x4.</p>
<dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – La ruta del archivo de imagen.</p>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>Un DataFrame con las columnas “Image”, “target”, “class”, y “path_jpeg”.</p>
</dd>
<dt class="field-odd">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
<p class="rubric">Ejemplo</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/path/a/la/imagen.jpg&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">to_dataframe</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">    Image      target   class    path_jpeg</span>
<span class="go">0   imagen_33  unknown  unknown  /path/a/la/imagen_33.jpg</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.to_path">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">to_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.to_path" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.to_path64">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">to_path64</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image64</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.to_path64" title="Link to this definition"></a></dt>
<dd><p>Guarda una imagen enviada como base64 en el servidor para su análisis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image64</strong> (<em>str</em>) – La imagen en formato base64.</p></li>
<li><p><strong>username</strong> (<em>str</em>) – El nombre de la carpeta del usuario que solicita el analisis.</p></li>
</ul>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>La ruta del archivo de imagen guardado en el servidor.</p>
</dd>
<dt class="field-odd">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
<dt class="field-even">Muestra<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – Si ocurre un error al decodificar la imagen base64.</p></li>
<li><p><strong>IOError</strong> – Si ocurre un error al guardar la imagen en el disco.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Ejemplo</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image64</span> <span class="o">=</span> <span class="s2">&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUg...&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">username</span> <span class="o">=</span> <span class="s2">&quot;usuario_3&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="n">to_path64</span><span class="p">(</span><span class="n">image64</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="analyze.to_pathWEB">
<span class="sig-prename descclassname"><span class="pre">analyze.</span></span><span class="sig-name descname"><span class="pre">to_pathWEB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#analyze.to_pathWEB" title="Link to this definition"></a></dt>
<dd><p>Guarda la imagen obtenida con la URL y descargada de internet en el servidor para su análisis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parámetros<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>bytes</em>) – El contenido de la imagen descargada.</p></li>
<li><p><strong>image_url</strong> (<em>str</em>) – La URL de la imagen.</p></li>
</ul>
</dd>
<dt class="field-even">Devuelve<span class="colon">:</span></dt>
<dd class="field-even"><p>La ruta del archivo de imagen guardado en el servidor.</p>
</dd>
<dt class="field-odd">Tipo del valor devuelto<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
<p class="rubric">Ejemplo</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">image_url</span> <span class="o">=</span> <span class="s2">&quot;http://example.com/image.jpg&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">path</span> <span class="o">=</span> <span class="n">to_pathWEB</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">image_url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pie de página">
        <a href="modules.html" class="btn btn-neutral float-left" title="HTTP" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="user.html" class="btn btn-neutral float-right" title="user module" accesskey="n" rel="next">Siguiente <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Derechos de autor 2024, ARTURO SÁNCHEZ SÁNCHEZ.</p>
  </div>

  Compilado con <a href="https://www.sphinx-doc.org/">Sphinx</a> usando un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">tema</a>
    proporcionado por <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>